<!DOCTYPE html>
<html
  lang="en"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  xmlns:th="http://www.thymeleaf.org"
  layout:decorate="~{master-layout}"
>
  <head>
    <title>Home</title>
    <link rel="stylesheet" th:href="@{/styles/navbar.css}" />
  </head>
  <body>
    <header layout:fragment="header">
      <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand josefin-slab-700 fs-4 me-4" href="/"
            >Marketplace</a
          >
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-4 mb-2 mb-lg-0">
              <li class="nav-item me-4">
                <a class="btn btn-success fw-semibold" href="/products?page=1"
                  >Buy Product</a
                >
              </li>
              <li class="nav-item me-4">
                <a class="btn btn-danger fw-semibold" href="/products/add"
                  >Sell Product</a
                >
              </li>
            </ul>

            <div class="d-flex align-items-center dropdown ms-auto">
              <button
                class="d-flex align-items-center text-decoration-none text-reset btn"
                type="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="28"
                  height="28"
                  fill="currentColor"
                  class="bi bi-person-circle me-2"
                  viewBox="0 0 16 16"
                  th:if="${#authentication.principal.profilePicture == null}"
                >
                  <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0" />
                  <path
                    fill-rule="evenodd"
                    d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"
                  />
                </svg>
                <img
                  th:src="@{/images/profiles/{imageFile} (imageFile = ${#authentication.principal.profilePicture})}"
                  class="profile-picture-navbar"
                  th:if="${#authentication.principal.profilePicture != null}"
                />
                <span class="fs-5" sec:authentication="name"></span>
              </button>
              <ul class="dropdown-menu">
                <li>
                  <a
                    class="dropdown-item"
                    th:href="@{/profiles/{username}(username=${#authentication.name})}"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      fill="currentColor"
                      class="bi bi-person-fill"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"
                      />
                    </svg>
                    <span class="ms-2">View My Profile</span>
                  </a>
                </li>
                <li>
                  <a
                    class="dropdown-item"
                    th:href="@{/profiles/{id}/products(id=${#authentication.principal.id})}"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      fill="currentColor"
                      class="bi bi-list-ul"
                      viewBox="0 0 16 16"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2"
                      />
                    </svg>
                    <span class="ms-2">View My Products</span>
                  </a>
                </li>
                <li>
                  <form
                    th:action="@{/logout}"
                    method="post"
                    class="dropdown-item"
                  >
                    <button
                      type="submit"
                      class="btn btn-secondary-outline p-0"
                      title="Log out"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        fill="currentColor"
                        class="bi bi-box-arrow-right"
                        viewBox="0 0 16 16"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0z"
                        />
                        <path
                          fill-rule="evenodd"
                          d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z"
                        />
                      </svg>
                      <span class="ms-2">Logout</span>
                    </button>
                  </form>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </nav>
    </header>
    <main layout:fragment="main">
      <div
        class="container-fluid d-flex flex-column align-items-center justify-content-center h-100"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="64"
          height="64"
          fill="currentColor"
          class="bi bi-cart-fill mb-2"
          viewBox="0 0 16 16"
        >
          <path
            d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"
          />
        </svg>
        <h1 class="mb-2 josefin-slab-700">Marketplace</h1>
        <p class="fw-light">Search for your next 2nd hand item</p>
        <form
          class="d-flex w-50"
          role="search"
          th:action="@{/products/search}"
          th:method="get"
        >
          <input
            class="form-control me-2"
            type="search"
            name="query"
            placeholder="Search Marketplace"
            aria-label="Search"
            th:value="${param.query != null ? param.query : ''}"
          />
          <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
      </div>
    </main>
  </body>
</html>
